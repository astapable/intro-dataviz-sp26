<!DOCTYPE html>
<html>
<head>
  <title>D3.js Minimal Clock</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    .clock-container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .clock-face {
      fill: #FAFAFA;
      stroke: #212121;
      stroke-width: 2px;
    }
    .clock-face-2 {
      fill: #a2a2a2;
      stroke: #212121;
      stroke-width: 2px;
    }
    .time-marker {
      fill: #4E1F94;
      transition: all 0.5s ease;
    }
    .time-text {
      font-family: Arial, sans-serif;
      font-size: 18px;
      text-anchor: middle;
      dominant-baseline: middle;
    }
  </style>
</head>
<body>
  <div class="clock-container">
    <svg id="clock" width="300" height="300"></svg>
  </div>

  <img src="SNAIL-ART.svg" alt="">

  <svg class="slug" xmlns="http://www.w3.org/2000/svg" width="257" height="227" viewBox="0 0 257 227">
    <defs>
      <style>
        .cls-1 {
          fill:#4E1F94;
          stroke: tomato;
          stroke-miterlimit: 10;
        }
      </style>
    </defs>
    <g id="ansilEar">
      <path class="cls-1" d="M83.0212 52.5C78.8319 58.8354 69.0212 66 69.0212 66H60.5212C71.8177 57.3624 67.9507 15.9982 75.0212 15C98.4266 11.6957 90.8111 40.7198 83.0212 52.5Z" fill="#F17C7C" stroke="black" stroke-width="6"/>
    </g>
    <g id="snailBody">
      <path class="cls-1" d="M58.5212 117.5C58.5212 117.5 49.8431 114.197 44.0212 114C32.7441 113.619 14.014 124.846 6.52123 110C-3.18483 90.7686 27.5777 73.7252 41.0212 69C48.2901 66.4451 60.5212 66 60.5212 66H69.0212C69.0212 66 80.9576 71.6443 86.0212 78C96.1663 90.7338 97.4317 116.775 97.0212 132.5C96.7113 144.373 92.0212 162.5 92.0212 162.5C92.0212 162.5 99.5328 160.342 103.521 157.5C125.106 142.121 108.973 108.275 122.521 90C137.114 70.3163 188.907 63.7489 210.521 73C239.227 85.2862 251.809 122.221 248.521 151.5C245.621 177.326 215.021 209 215.021 209L29.0212 212.5C29.0212 212.5 26.1836 194.166 29.0212 183C32.6104 168.877 43.1462 164.835 49.0212 151.5C54.5797 138.884 58.5212 117.5 58.5212 117.5Z" fill="#D1A2A2" stroke="black" stroke-width="6"/>
    </g>
  </svg>

  <script>
    // ADDED_Set up the BG color to class slug (the snail svg) to lightblue
    d3.select(".slug").style("background-color", "lightblue");

    // Set up the SVG container
    const svg = d3.select("#clock");
    const width = 300;
    const height = 300;
    const radius = 145;
    const centerX = width / 2;
    const centerY = height / 2;

    // Create the clock face
    svg.append("circle")
      .attr("cx", centerX)
      .attr("cy", centerY)
      .attr("r", radius)
      .attr("class", "clock-face"); // We are denoting the atribute as a {CSS class} and say style it as .clock-face

    svg.append("circle")
      .attr("cx", centerX)
      .attr("cy", centerY)
      .attr("r", 70)
      .attr("class", "clock-face-2");

    svg.append("rect")
      .attr("width", 50)
      .attr("height", 50)
      .attr("x", centerX -25)
      .attr("y", centerY -25)
      .attr("class", "clock-face-2");


    // Create a group for the time marker
    const timeMarker = svg.append("g")
      .attr("transform", `translate(${centerX}, ${centerY})`);

    // Add the time marker circle
    timeMarker.append("circle")
      .attr("class", "time-marker") // We are denoting the atribute as a {CSS class} and say style it as .time-marker
      .attr("r", 8);

    timeMarker.append("rect")
      .attr("class", "time-marker") // We are denoting the atribute as a {CSS class} and say style it as .time-marker
      .attr("width", 50)
      .attr("height", 50)

    // Add text for displaying time
    const timeText = svg.append("text")
      .attr("x", centerX)
      .attr("y", centerY + radius / 2)
      .attr("class", "time-text"); // We are denoting the atribute as a {CSS class} and say style it as .time-text

    // Function to update the clock
    function updateClock() {
      const now = new Date();
      const seconds = now.getSeconds();
      const minutes = now.getMinutes();
      const hours = now.getHours();
      if (seconds <= 30) {
        d3.select(".slug").style("background-color", "lightblue");
      } else {
        d3.select(".slug").style("background-color", "orange");
      } // ADDED_Defined body BG color to class sligaccording to seconds value (0-30 lightblue, 31-59 orange)
      
      // Calculate the angle for the time marker
      // We're using seconds to position the marker around the clock
      const angle = (seconds / 60) * 360 - 90; // Convert to degrees and start at 12 o'clock
      
      // Update the time marker position using rotate and translate
      timeMarker.attr("transform", `translate(${centerX}, ${centerY}) rotate(${angle}) translate(${radius * 0.8}, 0)`);
      
      // Update the time text
      timeText.text(`${hours.toString().padStart(2, '0')}: any text ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`);
    } // BACKTICK (''), ${} says take all this content and set it for parameters, : is just a text
    updateClock();
    
    // Set interval to update the clock every second
    setInterval(updateClock, 1000);
  </script>
</body>
</html>
